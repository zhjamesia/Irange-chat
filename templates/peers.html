<!DOCTYPE html>
<html>
<head>
    <title>PeerJS Chat</title>
	<script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
	<!-- externalized styles -->
	<link rel="stylesheet" href="static/style.css">
</head>
<body>
    <!-- Replace main wechat layout with centered chat-box while preserving contacts and chat area -->
	<div class="center-wrap">
		<div class="chat-box">
			<div class="chat-header">
				<span>Irange Chat</span>
				<small id="myPeerId">...</small>
			</div>

			<!-- add overlay just after header so it's positioned inside the chat container -->
			<div id="remoteOverlay" class="remote-overlay" aria-hidden="true">
				<video id="remoteOverlayVideo" autoplay playsinline></video>
				<button id="shareDesktop" class="share-desktop-btn" style="display:none;">Share Desktop</button>
				<button id="hangupBtn" class="hangup-btn">Hang Up</button>
			</div>

			<div class="chat-area">
				<!-- contacts pane on the RIGHT now; includes join room + camera + call controls -->
				<div class="contacts-pane" id="contacts">
					<!-- new: join controls + camera + call inserted into contacts pane -->
					<div id="roomControls" style="padding:10px;border-bottom:1px solid #eee;">
						<input type="text" id="roomIdLeft" placeholder="Enter Room ID" style="width:80%;padding:6px;border-radius:6px;border:1px solid #ddd;margin-bottom:8px;">
						<input type="text" id="usernameInput" placeholder="Enter Your Name (optional)" style="width:80%;padding:6px;border-radius:6px;border:1px solid #ddd;margin-bottom:8px;">
						<button id="joinRoomLeft" class="btn" style="width:100%;margin-bottom:8px;">Join Room/Refresh</button>

						<label for="cameraSelect" style="display:block;margin-bottom:6px;font-size:12px;color:#666;">Camera</label>
						<select id="cameraSelect" style="width:100%;padding:6px;border-radius:6px;border:1px solid #ddd;margin-bottom:8px;">
							<option value="">Default camera</option>
						</select>

						<button id="makeCall" class="btn" style="width:48%;display:inline-block;margin-right:4%;">Call</button>
						<button id="answerCall" class="btn" style="width:48%;display:inline-block;display:none;">Answer</button>
					</div>

					<div id="contactsList"></div>
				</div>
				<div class="messages-pane">
					<div class="input-bar">
						<input id="imageInput" class="file-input" type="file" accept="*/*">
						<textarea id="messageInput" placeholder="Type a message..."></textarea>
						<button id="sendAll" class="btn">Send</button>
					</div>
					<div id="chatLog" class="messages"></div>

				</div>

			</div>
		</div>
	</div>

    <!-- changed: add playsinline and mute local preview so iOS allows autoplay -->
    <video id="localVideo" autoplay playsinline muted></video>
    <canvas id="canvas" style="display:none;"></canvas>

	<script src="static/app.js"></script>

    <!-- ...existing footer/ placeholders ... -->
</body>
</html>